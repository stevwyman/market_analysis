{% extends "data/layout.html" %}
{% load static %}

{% block body %}
<section class="py-5 text-center container">
    <h1>{{watchlist}}</h1>
</section>
<div class="container">
    
        <div>
            <table class="table table-hover">
                <thead>
                    <tr class="text-center">
                        <th scope="col">Name</th>
                        <th scope="col" class="d-lg-table-cell d-table-cell">price ()</th>
                        <th scope="col">change(<a href="?order_by=change&direction=desc">&darr;</a><a href="?order_by=change&direction=asc">&uarr;</a>)</th>
                        <th scope="col" class="d-lg-table-cell d-table-cell">SMA(50)</th>
                        <th scope="col">spread(<a href="?order_by=spread&direction=desc">&darr;</a><a href="?order_by=spread&direction=asc">&uarr;</a>)</th>
                        <th scope="col">Hurst(<a href="?order_by=hurst&direction=desc">&darr;</a><a href="?order_by=hurst&direction=asc">&uarr;</a>)</th>
                        <th scope="col" class="d-lg-table-cell d-table-cell"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for watchlist_entry in watchlist_entries %}
                    <tr>
                        <td><a href="{% url 'security' watchlist_entry.security.id %}">{{ watchlist_entry.security.name }}</a></th>
                        <td class="text-end d-lg-table-cell d-table-cell">{{ watchlist_entry.price.currency_symbol }}&nbsp;{{ watchlist_entry.price.price }}<br>{% load humanize %}{{ watchlist_entry.price.local_timestamp|naturaltime }}</td>
                        <td class="text-end">{{ watchlist_entry.price.change_percent|floatformat:2 }}%<br>({{ watchlist_entry.price.change|floatformat:2 }})</td>
                        <td class="text-end d-lg-table-cell d-table-cell">{{ watchlist_entry.sma.sma|floatformat:2 }}</td>
                        <td class="text-end">{{ watchlist_entry.sma.sd|floatformat:2 }}</td>
                        <td class="text-end">{{ watchlist_entry.sma.hurst|floatformat:2 }}</td>
                        <td class="text-end d-lg-table-cell d-table-cell">
                            <form action="{% url 'security_drop' watchlist.id %}" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="security_id" value="{{watchlist_entry.security.id}}">
                                <input class="btn btn-outline-warning btn-sm" type="submit" value="drop">
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table> 
        </div>
    
</div>

<div class="container">
    <div class="row justify-content-md-center">
        <div class="col-9">{% include "data/pagination.html" %}</div><div class="col-3"><a class="btn btn-outline-warning btn-sm" href="{% url 'security_new' watchlist.id %}">+</a></div>
    </div>
</div>

{% endblock %}